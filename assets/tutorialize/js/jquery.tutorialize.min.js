!function(t){var i=[];t.tutorialize=function(i,e){e?t.tutorialize._instance(i,e):t.tutorialize.obj.init(i)},t.tutorialize.cleanRemember=function(e){if(e){if(!t.tutorialize.instanceExist)return;i[e].cleanRemember()}else t.tutorialize.obj.cleanRemember()},t.tutorialize.getCurrentIndex=function(e){if(e){if(!t.tutorialize.instanceExist)return;return i[e].currentSlideIdx}return t.tutorialize.obj.currentSlideIdx},t.tutorialize.getTotal=function(e){if(e){if(!t.tutorialize.instanceExist)return;return i[e].options.slides.length}return t.tutorialize.obj.options.slides.length},t.tutorialize.instanceExist=function(t){return i[t]?!0:!1},t.tutorialize.next=function(e){if(e){if(!t.tutorialize.instanceExist)return;i[e].nextSlide()}else t.tutorialize.obj.nextSlide()},t.tutorialize.prev=function(e){if(e){if(!t.tutorialize.instanceExist)return;i[e].prevSlide()}else t.tutorialize.obj.prevSlide()},t.tutorialize.start=function(e){if(e){if(!t.tutorialize.instanceExist)return;i[e].start()}else t.tutorialize.obj.start()},t.tutorialize.startAt=function(e,o){if(o){if(!t.tutorialize.instanceExist)return;i[o].start(e)}else t.tutorialize.obj.start(e)},t.tutorialize.stop=function(e){if(e){if(!t.tutorialize.instanceExist)return;i[e].stop()}else t.tutorialize.obj.stop()},t.tutorialize._instance=function(e,o){var r=Object.create(t.tutorialize.obj);return r.init(e,o),i[o]=t.data(this,"tutorialize",r),i[o]},t.tutorialize.defaults={slides:[],arrowOffset:0,arrowPath:"./arrows/arrow-blue.png",arrowSize:44,autoScroll:!0,bgColor:"#11a7df",borderRadius:"5px",buttonBgColor:"#0d8fbf",buttonFontColor:"#fff",effectDelay:500,fontColor:"#fff",fontSize:"13px",height:"auto",keyboardNavigation:!0,labelEnd:"End",labelNext:"Next",labelPrevious:"Previous",labelStart:"Start",minWidth:80,minWidthCSS:160,overlayColor:"#000",overlayMode:"none",overlayOpacity:.5,overlayPadding:0,padding:20,remember:!1,rememberKeyName:"tutorialize-storage",rememberOnceOnly:!1,runEnd:"stop",runMode:"manual",runDuration:8e3,showButtonClose:!0,showButtonNext:!0,showButtonPrevious:!0,theme:"",width:200,onStart:null,onStop:null},t.tutorialize.obj={_scrollTopOffset:100,currentSlide:null,currentSlideIdx:-1,initialized:!1,instanceName:"instance0",options:null,stSlidePlay:null,lastSlide:null,lastSlideScrollPosition:0,tmpCurrentSlidePosition:"",tmpWinWidth:-1,$tutorializeElements:null,init:function(i,e){this.options=t.extend({},t.tutorialize.defaults,i),e&&(this.instanceName=e),this.options.rememberKeyName=this.options.rememberKeyName+"."+this.instanceName,this.check(),this.initDom()},initDom:function(){var i=this,e=t(window);0===t('#tutorialize-elements[data-instance="'+this.instanceName+'"]').length&&t("body").prepend('<div id="tutorialize-elements" data-instance="'+this.instanceName+'"></div>'),this.$tutorializeElements=t('#tutorialize-elements[data-instance="'+this.instanceName+'"]'),e.resize(function(){i.moveSlideOnResize(),"all"!=i.currentSlide.overlayMode&&i.moveOverlayOnResize()}),e.scroll(function(){"all"!=i.currentSlide.overlayMode&&i.moveOverlayOnResize()}),t(document).on("keyup",function(t){i.options.keyboardNavigation&&($slideControl=i.$tutorializeElements.find(".tutorialize-slide .tutorialize-slide-control"),27==t.keyCode&&i.stop(),39==t.keyCode&&$slideControl.find("li.next span").trigger("click"),37==t.keyCode&&0!==i.currentSlideIdx&&$slideControl.find("li.prev span").trigger("click"))})},cleanRemember:function(){localStorage.removeItem(this.options.rememberKeyName)},calculateSlideOverlay:function(i,e){if(e||"all"!==this.currentSlide.overlayMode&&"html"!==i.selector){var o=this.getDOMValues(),r=Math.round(i.offset().left-this.currentSlide.overlayPadding),n=Math.round(i.offset().top-this.currentSlide.overlayPadding-o.body.scrollTop),l=Math.round(i.outerWidth()+2*this.currentSlide.overlayPadding),s=Math.round(i.outerHeight()+2*this.currentSlide.overlayPadding);e||this.$tutorializeElements.prepend('<div class="tutorialize-slide-overlay top"></div><div class="tutorialize-slide-overlay left"></div><div class="tutorialize-slide-overlay right"></div><div class="tutorialize-slide-overlay bottom"></div>');var a=t(".tutorialize-slide-overlay.top"),d=t(".tutorialize-slide-overlay.left"),u=t(".tutorialize-slide-overlay.right"),c=t(".tutorialize-slide-overlay.bottom"),h=n+s;a.css({top:0,left:0,right:0,height:n,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor}),d.css({top:n,left:0,height:s,width:r,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor}),u.css({top:n,left:r+l,right:0,height:s,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor}),c.css({top:h,left:0,right:0,bottom:0,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor})}else{this.$tutorializeElements.prepend('<div class="tutorialize-slide-overlay"></div>');var p=t(".tutorialize-slide-overlay");p.css({top:0,left:0,right:0,bottom:0,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor})}},check:function(){return this.options.slides&&0!==this.options.slides.length?this.options.remember&&"undefined"==typeof Storage?(this.options.remember=!1,void alert("[Tutorialize Error] Your browser doesn't support web storage")):void 0:void alert("[Tutorialize Error] Slides undefined or Slides empty!")},checkSlidePositionExceed:function(t,i){var e=this.getDOMValues(),o=e.body.scrollLeft,r=e.body.scrollTop,n=[],l=(r>t.top,t.top+i.outerHeight()-r>e.win.height,o>t.left),s=t.left+i.outerWidth()>e.win.width;return l&&n.push("left"),s&&n.push("right"),n.length?n:!1},getArrowPosition:function(){var t={},i=-1*this.currentSlide.arrowSize;switch(this.currentSlide.position){case"center-center":break;case"top-left":t={"background-position":"0 -"+6*this.currentSlide.arrowSize+"px",bottom:i,left:"10%"};break;case"top-center":t={"background-position":"0 -"+7*this.currentSlide.arrowSize+"px",bottom:i,left:"50%","margin-left":this.currentSlide.arrowSize/2*-1};break;case"top-right":t={"background-position":"0 -"+8*this.currentSlide.arrowSize+"px",bottom:i,right:"10%"};break;case"left-top":t={"background-position":"0 -"+3*this.currentSlide.arrowSize+"px",right:i,top:"10%"};break;case"left-center":t={"background-position":"0 -"+4*this.currentSlide.arrowSize+"px","margin-top":this.currentSlide.arrowSize/2*-1,right:i,top:"50%"};break;case"left-bottom":t={bottom:"10%","background-position":"0 -"+5*this.currentSlide.arrowSize+"px",right:i};break;case"right-top":t={left:i,top:"10%"};break;case"right-center":t={"background-position":"0 -"+1*this.currentSlide.arrowSize+"px",left:i,"margin-top":this.currentSlide.arrowSize/2*-1,top:"50%"};break;case"right-bottom":t={"background-position":"0 -"+2*this.currentSlide.arrowSize+"px",left:i,bottom:"10%"};break;case"bottom-left":t={"background-position":"0 -"+9*this.currentSlide.arrowSize+"px",top:i,left:"10%"};break;case"bottom-center":t={"background-position":"0 -"+10*this.currentSlide.arrowSize+"px",top:i,left:"50%","margin-left":this.currentSlide.arrowSize/2*-1};break;case"bottom-right":t={"background-position":"0 -"+11*this.currentSlide.arrowSize+"px",top:i,right:"10%"}}return t},getDOMValues:function(){var i=t(window),e=t(document),o=t("body"),r={body:{scrollLeft:document.documentElement.scrollLeft?document.documentElement.scrollLeft:o.scrollLeft(),scrollTop:document.documentElement.scrollTop?document.documentElement.scrollTop:o.scrollTop()},doc:{height:e.height(),width:e.width()},win:{height:i.height(),width:i.width()}};return r},getRemember:function(){return this.options.remember?localStorage.getItem(this.options.rememberKeyName)?JSON.parse(localStorage.getItem(this.options.rememberKeyName)):!1:void 0},getSlideDefaultValues:function(t){return t.arrowOffset=t.arrowOffset?t.arrowOffset:this.options.arrowOffset,t.arrowPath=t.arrowPath?t.arrowPath:this.options.arrowPath,t.arrowSize=t.arrowSize?t.arrowSize:this.options.arrowSize,t.bgColor=t.bgColor?t.bgColor:this.options.bgColor,t.borderRadius=t.borderRadius?t.borderRadius:this.options.borderRadius,t.buttonBgColor=t.buttonBgColor?t.buttonBgColor:this.options.buttonBgColor,t.buttonFontColor=t.buttonFontColor?t.buttonFontColor:this.options.buttonFontColor,t.fontColor=t.fontColor?t.fontColor:this.options.fontColor,t.fontSize=t.fontSize?t.fontSize:this.options.fontSize,t.height=t.height?t.height:this.options.height,t.minWidth=t.minWidth?t.minWidth:this.options.minWidth,t.minWidthCSS=t.minWidthCSS?t.minWidthCSS:this.options.minWidthCSS,t.overlayColor=t.overlayColor?t.overlayColor:this.options.overlayColor,t.overlayMode=t.overlayMode?t.overlayMode:this.options.overlayMode,t.overlayOpacity=t.overlayOpacity?t.overlayOpacity:this.options.overlayOpacity,t.overlayPadding=t.overlayPadding?t.overlayPadding:this.options.overlayPadding,t.padding=t.padding?t.padding:this.options.padding,t.position=t.position&&-1!=["center-center","top-left","top-center","top-right","left-top","left-center","left-bottom","right-top","right-center","right-bottom","bottom-left","bottom-center","bottom-right"].indexOf(t.position)?"html"===t.selector?"center-center":t.position:"center-center",t.selector=t.selector?t.selector:"html",t.width=t.width?t.width:this.options.width,t},getSlidePosition:function(t,i){var e,o=this.getDOMValues(),r=t.offset().left,n="fixed"===t.css("position")?t.position().top-o.body.scrollTop:t.offset().top,l=t.outerWidth(),s="html"===i.attr("data-selector")?o.win.height:t.outerHeight(),a=i.outerWidth(),d=i.outerHeight(),u=0,c=i.attr("data-position"),h=c.split("-"),p={};switch(c){case"center-center":u=r+(l/2-a/2),e=n+(s/2-d/2);break;case"top-left":u=r,e=n-d;break;case"top-center":u=r+(l/2-a/2),e=n-d;break;case"top-right":u=r+l-a,e=n-d;break;case"left-top":u=r-a,e=n;break;case"left-center":u=r-a,e=n+(s/2-d/2);break;case"left-bottom":u=r-a,e=n+s-d;break;case"right-top":u=r+l,e=n;break;case"right-center":u=r+l,e=n+(s/2-d/2);break;case"right-bottom":u=r+l,e=n+s-d;break;case"bottom-left":u=r,e=n+s;break;case"bottom-center":u=r+(l/2-a/2),e=n+s;break;case"bottom-right":u=r+l-a,e=n+s}"left"===h[0]?u-=this.currentSlide.arrowSize+this.currentSlide.arrowOffset:"right"===h[0]?u+=this.currentSlide.arrowSize+this.currentSlide.arrowOffset:"top"===h[0]?e-=this.currentSlide.arrowSize+this.currentSlide.arrowOffset:"bottom"===h[0]&&(e+=this.currentSlide.arrowSize+this.currentSlide.arrowOffset),p={left:u,slidePosition:c,top:e};var S;if(S=this.checkSlidePositionExceed(p,i)){if(this.tmpCurrentSlidePosition||(this.tmpCurrentSlidePosition=this.currentSlide.position),this.tmpWinWidth=o.win.width,-1!==S.indexOf("left")||-1!==S.indexOf("right"))return i.width()>=this.currentSlide.minWidth?(i.width()<this.currentSlide.minWidthCSS&&i.addClass("minWidthCSS"),i.width(i.width()-10)):(i.removeClass("minWidthCSS"),i.attr("data-position","center-center"),i.width(this.currentSlide.width)),this.getSlidePosition(t,i)}else if(this.tmpCurrentSlidePosition&&i.attr("data-position",this.tmpCurrentSlidePosition),o.win.width>this.tmpWinWidth&&i.width()<this.currentSlide.width)return i.width()>=this.currentSlide.minWidthCSS&&i.removeClass("minWidthCSS"),i.width(i.width()+10),this.getSlidePosition(t,i);return p},moveOverlayOnResize:function(){var i=this;this.$tutorializeElements.find(".tutorialize-slide").each(function(){var e=t(this),o=t(e.attr("data-selector"));i.calculateSlideOverlay(o,!0)})},moveSlideOnResize:function(){var i=this;this.$tutorializeElements.find(".tutorialize-slide").each(function(){var e=t(this),o=e.find(".tutorialize-slide-arrow"),r=t(e.attr("data-selector"));i.setSlide_Position(r,e,o)})},nextSlide:function(t){var i=this,e=this.currentSlideIdx>=this.options.slides.length-1;return e&&"stop"===this.options.runEnd?(this.setRemember(0,this.options.rememberOnceOnly),void this.stop()):(this.currentSlideIdx=t?t:e?0:this.currentSlideIdx+1,this.lastSlide=this.currentSlide,this.currentSlide=this.getSlideDefaultValues(this.options.slides[this.currentSlideIdx]),this.setRemember(this.currentSlideIdx),this.runSlide(),void("auto"===this.options.runMode&&(i.stSlidePlay=setTimeout(function(){i.nextSlide()},this.options.runDuration))))},prevSlide:function(){0===this.currentSlideIdx?this.currentSlideIdx=this.options.slides.length-1:this.currentSlideIdx--,this.lastSlide=this.currentSlide,this.currentSlide=this.getSlideDefaultValues(this.options.slides[this.currentSlideIdx]),this.setRemember(this.currentSlideIdx),this.runSlide()},runSlide:function(){var i=this,e=this.getDOMValues();this.tmpCurrentSlidePosition="",this.$tutorializeElements.empty().append(this.runSlide_BuildSlide());var o=this.$tutorializeElements.find(".tutorialize-slide"),r=o.find(".tutorialize-slide-arrow"),n=o.find(".tutorialize-slide-close"),l=o.find(".tutorialize-slide-control"),s=t(this.currentSlide.selector);"auto"===this.currentSlide.width&&(this.currentSlide.width=o.width()),o.css({"background-color":this.currentSlide.bgColor,"border-radius":this.currentSlide.borderRadius,color:this.currentSlide.fontColor,"font-size":this.currentSlide.fontSize,height:"auto"==this.currentSlide.height?"auto":this.currentSlide.height,padding:this.currentSlide.padding,position:"fixed"===s.css("position")||"center-center"===this.currentSlide.position&&"html"===this.currentSlide.selector?"fixed":"absolute",width:"auto"==this.currentSlide.width?o.width():this.currentSlide.width}),r.css({"background-image":'url("'+this.currentSlide.arrowPath+'")',height:this.currentSlide.arrowSize,width:this.currentSlide.arrowSize}),n.css({"background-color":this.currentSlide.buttonBgColor}),l.find("li").css({"background-color":this.currentSlide.buttonBgColor}),l.find("li span").css({color:this.currentSlide.buttonFontColor});var a=this.setSlide_Position(s,o,r);"none"!=this.currentSlide.overlayMode&&this.calculateSlideOverlay(s);var d=a.top>=this.lastSlideScrollPosition?!1:!0,u=d?a.top:a.top+o.height();if(this.options.autoScroll&&"html"!==this.currentSlide.selector&&"fixed"!==s.css("position")&&(e.body.scrollTop>u||u>e.win.height+e.body.scrollTop)&&(u=d?u-this._scrollTopOffset:u+this._scrollTopOffset-e.win.height,t("html,body").animate({scrollTop:u},this.options.effectDelay)),this.lastSlideScrollPosition=a.top,this.lastSlide&&this.lastSlide.position===this.currentSlide.position){var c=".tutorialize-slide-content, .tutorialize-slide-control, .tutorialize-slide-title";o.show().find(c).hide().fadeIn(this.options.effectDelay)}else o.fadeIn(this.options.effectDelay);t.isFunction(this.currentSlide.onSlide)&&this.currentSlide.onSlide.apply(this,[this.currentSlideIdx,this.currentSlide,o]),l.find("li.prev span").on("click",function(e){e.preventDefault(),clearTimeout(i.stSlidePlay),t.isFunction(i.currentSlide.onPrev)?i.currentSlide.onPrev.apply(this,[i.currentSlideIdx,i.currentSlide,o]):i.prevSlide()}),l.find("li.next span").on("click",function(e){e.preventDefault(),clearTimeout(i.stSlidePlay),t.isFunction(i.currentSlide.onNext)?i.currentSlide.onNext.apply(this,[i.currentSlideIdx,i.currentSlide,o]):i.nextSlide()}),n.on("click",function(t){t.preventDefault(),i.stop()})},runSlide_BuildControls:function(){var t=this.options.slides.length,i='<ul class="tutorialize-slide-control"><li class="counter">'+(this.currentSlideIdx+1)+"/"+t+'</li><li class="next'+(this.options.showButtonNext?"":" hide")+'"><span>'+(0===this.currentSlideIdx&&t>1?this.options.labelStart:this.currentSlideIdx!=t-1?this.options.labelNext:this.options.labelEnd)+'</span></li><li class="prev'+(this.options.showButtonPrevious&&this.currentSlideIdx?"":" hide")+'"><span>'+this.options.labelPrevious+"</span></li></ul>";return i},runSlide_BuildSlide:function(){return'<div class="tutorialize-slide '+this.options.theme+'" data-selector="'+this.currentSlide.selector+'" data-position="'+this.currentSlide.position+'"><span class="tutorialize-slide-arrow"></span>'+(this.options.showButtonClose?'<span class="tutorialize-slide-close">x</span>':"")+(this.currentSlide.title?'<div class="tutorialize-slide-title">'+this.currentSlide.title+"</div>":"")+'<div class="tutorialize-slide-content">'+this.currentSlide.content+"</div>"+this.runSlide_BuildControls()+"</div>"},setRemember:function(t,i){this.options.remember&&localStorage.setItem(this.options.rememberKeyName,JSON.stringify({currentSlideIdx:t,onceOnly:i?i:!1}))},setSlide_Position:function(t,i,e){var o=this.getSlidePosition(t,i);return this.currentSlide.position=o.slidePosition,arrowPosition=this.getArrowPosition(),i.css({top:o.top,left:o.left}),e.css({"background-position":"0 0",top:"auto",left:"auto",right:"auto",bottom:"auto",margin:"auto"}).css(arrowPosition),"center-center"===this.currentSlide.position?e.hide():e.show(),o},start:function(i){var e=this,o=this.getRemember();this.currentSlideIdx=o?o.currentSlideIdx-1:-1,o&&o.onceOnly||(e.nextSlide(i),t.isFunction(e.options.onStart)&&e.options.onStart.apply(e,[e.currentSlideIdx,e.currentSlide,this.$tutorializeElements.find(".tutorialize-slide")]))},stop:function(){t.isFunction(this.options.onStop)&&this.options.onStop.apply(this,[this.currentSlideIdx,this.currentSlide,this.$tutorializeElements.find(".tutorialize-slide")]),clearTimeout(this.stSlidePlay),this.$tutorializeElements.remove(),t(document).off("keyup")}}}(jQuery);